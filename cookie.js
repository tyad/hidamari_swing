var TROPHY_DATA = {
	"HIDAMARISWING-TROPHY-EASY-CLEAR":{
		"name":"はじまり",
		"text":"ほのぼのコースをクリア"
	},
	"HIDAMARISWING-TROPHY-EASY-RANKMAX":{
		"name":"芽生えドライブ",
		"text":"ほのぼのコースで★★★"
	},
	"HIDAMARISWING-TROPHY-EASY-ALLJUSTMEET":{
		"name":"カッキーン！",
		"text":"ほのぼのコースで全ての球を真芯ヒットさせた"
	},

	"HIDAMARISWING-TROPHY-NORMAL-CLEAR":{
		"name":"わくわく",
		"text":"わくわくコースをクリア"
	},
	"HIDAMARISWING-TROPHY-NORMAL-RANKMAX":{
		"name":"流星レコード",
		"text":"わくわくコースで★★★"
	},

	"HIDAMARISWING-TROPHY-HARD-CLEAR":{
		"name":"どきどき",
		"text":"どきどきコースをクリア"
	},
	"HIDAMARISWING-TROPHY-HARD-RANKMAX":{
		"name":"あやふやロケット",
		"text":"どきどきコースで★★★"
	},

	"HIDAMARISWING-TROPHY-STRAIGHT-CLEAR":{
		"name":"ノビのび",
		"text":"まっすぐコースをクリア"
	},
	"HIDAMARISWING-TROPHY-STRAIGHT-RANKMAX":{
		"name":"なんかいいキモチ",
		"text":"まっすぐコースで★★★"
	},

	"HIDAMARISWING-TROPHY-KIRE-CLEAR":{
		"name":"キレもの",
		"text":"きれきれコースをクリア"
	},
	"HIDAMARISWING-TROPHY-KIRE-RANKMAX":{
		"name":"なればいいカンジ",
		"text":"きれきれコースで★★★"
	},

	"HIDAMARISWING-TROPHY-YUNO-CLEAR":{
		"name":"ゆのさま",
		"text":"ゆのさまをクリア"
	},
	"HIDAMARISWING-TROPHY-YUNO-RANKMAX":{
		"name":"VIP",
		"text":"ゆのさまで★★★"
	},
	"HIDAMARISWING-TROPHY-YUNO-JUSTMEET":{
		"name":"とんでけー",
		"text":"ゆのさまで真芯ヒットする"
	},
	"HIDAMARISWING-TROPHY-YUNO-NOMISS":{
		"name":"ねばりうち",
		"text":"ゆのさまで空振りしない"
	},

	"HIDAMARISWING-TROPHY-KNOCK-CLEAR":{
		"name":"おつかれさま",
		"text":"100本ノックをクリア"
	},
	"HIDAMARISWING-TROPHY-KNOCK-RANKMAX":{
		"name":"アベレージヒッター",
		"text":"100本ノックで★★★"
	},
	"HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-5":{
		"name":"ぴったり",
		"text":"100本ノックで1プレイ真芯5回以上"
	},
	"HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-10":{
		"name":"どんぴしゃ",
		"text":"100本ノックで1プレイ真芯10回以上"
	},
	"HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-20":{
		"name":"パワーヒッター",
		"text":"100本ノックで1プレイ真芯20回以上"
	},


	"HIDAMARISWING-TROPHY-EASY_EX-CLEAR":{
		"name":"統一球でもへっちゃら",
		"text":"ほのぼのコース×SPをクリア"
	},
	"HIDAMARISWING-TROPHY-EASY_EX-RANKMAX":{
		"name":"あららできちゃった",
		"text":"ほのぼのコース×SPで★★★"
	},

	"HIDAMARISWING-TROPHY-KNOCK_EX-CLEAR":{
		"name":"わっしょい",
		"text":"バンザイノックをクリア"
	},
	"HIDAMARISWING-TROPHY-KNOCK_EX-RANKMAX":{
		"name":"わしょしょい",
		"text":"バンザイノックで★★★"
	},
	"HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-10":{
		"name":"かっとび",
		"text":"バンザイノックで1プレイ真芯10回以上"
	},
	"HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-25":{
		"name":"ふっとび",
		"text":"バンザイノックで1プレイ真芯25回以上"
	},
	"HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-50":{
		"name":"ぶっとび",
		"text":"バンザイノックで1プレイ真芯50回以上"
	},

	"HIDAMARISWING-TROPHY-KNOCK_HARD-CLEAR":{
		"name":"はなまる",
		"text":"どきどきノックをクリア"
	},
	"HIDAMARISWING-TROPHY-KNOCK_HARD-RANKMAX":{
		"name":"いぶし銀",
		"text":"どきどきノックで★★★"
	},
	"HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-5":{
		"name":"ボールは場外へ",
		"text":"どきどきノックで1プレイ真芯5回以上"
	},
	"HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-10":{
		"name":"ボールは星になった",
		"text":"どきどきノックで1プレイ真芯10回以上"
	},
	"HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-15":{
		"name":"ボールを砕いた",
		"text":"どきどきノックで1プレイ真芯15回以上"
	},


	"HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-1":{
		"name":"ガツーン！",
		"text":"初めて真芯でヒットさせた"
	},
	"HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-10":{
		"name":"ドカーン！",
		"text":"10回真芯ヒットさせた"
	},
	"HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-50":{
		"name":"爆発だ！",
		"text":"50回真芯ヒットさせた"
	},
	"HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-100":{
		"name":"芸術的な爆発！",
		"text":"100回真芯ヒットさせた"
	},
	"HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-365":{
		"name":"真芯爆発×365",
		"text":"365回真芯ヒットさせた"
	},

	"HIDAMARISWING-TROPHY-TOTAL-POINT-1000":{
		"name":"さてさて1000m",
		"text":"累計1000m飛ばした"
	},
	"HIDAMARISWING-TROPHY-TOTAL-POINT-3980":{
		"name":"それでそれで3980m",
		"text":"累計3980m飛ばした"
	},
	"HIDAMARISWING-TROPHY-TOTAL-POINT-10000":{
		"name":"そんでもって10000m",
		"text":"累計10000m飛ばした"
	},
	"HIDAMARISWING-TROPHY-TOTAL-POINT-100000":{
		"name":"ひだまりスラッガー",
		"text":"累計100000m飛ばした"
	},
	"HIDAMARISWING-TROPHY-TOTAL-MISS-1":{
		"name":"おっと",
		"text":"空振りした(見逃しも含む)"
	},
	"HIDAMARISWING-TROPHY-TOTAL-MISS-100":{
		"name":"あらら",
		"text":"100回空振りした(見逃しも含む)"
	},

	"HIDAMARISWING-TROPHY-TOTAL-GAMEPLAY-100":{
		"name":"ありがとう！",
		"text":"100回遊んだ"
	}
}

var COURSE_DATA = {
	"EASY":{
		"name":"ほのぼのコース"
	},
	"NORMAL":{
		"name":"わくわくコース"
	},
	"HARD":{
		"name":"どきどきコース"
	},
	"STRAIGHT" : {
		"name":"まっすぐコース"
	},
	"KIRE" : {
		"name":"きれきれコース"
	},
	"YUNO" : {
		"name":"ゆのさま"
	},
	"KNOCK" : {
		"name":"100本ノック"
	},
	"EASY_EX" : {
		"name":"ほのぼのコース×SP"
	},
	"KNOCK_EX" : {
		"name":"バンザイノック"
	},
	"KNOCK_HARD" : {
		"name":"どきどきノック"
	}
}

//通常コース生成
function createCommonCourse(){
	var CommonCourse = ["EASY"];
	if(getCookie("HIDAMARISWING-UNLOCK-NORMAL") == 1){
		CommonCourse.push("NORMAL");
	}
	if(getCookie("HIDAMARISWING-UNLOCK-HARD") == 1){
		CommonCourse.push("HARD");
	}
	if(getCookie("HIDAMARISWING-UNLOCK-STRAIGHT") == 1){
		CommonCourse.push("STRAIGHT");
	}
	if(getCookie("HIDAMARISWING-UNLOCK-KIRE") == 1){
		CommonCourse.push("KIRE");
	}
	return CommonCourse;
}
//エクストラコース生成
function createExtraCourse(){
	var ExtraCourse = [];
	if(getCookie("HIDAMARISWING-UNLOCK-YUNO")){
		ExtraCourse.push("YUNO");
	}

	ExtraCourse.push("KNOCK");

	if(getCookie("HIDAMARISWING-UNLOCK-KNOCK_EX")){
		ExtraCourse.push("KNOCK_EX");
	}
	if(getCookie("HIDAMARISWING-UNLOCK-KNOCK_HARD")){
		ExtraCourse.push("KNOCK_HARD");
	}
	if(getCookie("HIDAMARISWING-UNLOCK-EASY_EX")){
		ExtraCourse.push("EASY_EX");
	}
	return ExtraCourse;
}

//数字か判定関数（undefinedとNaNを避けるため）
function isNumber(x){ 
    if( typeof(x) != 'number' && typeof(x) != 'string' )
        return false;
    else 
        return (x == parseFloat(x) && isFinite(x));
}

//指定のクッキー取得
function getCookie(kword){
	kword = kword + "=";
	kdata = "";
	scookie = document.cookie + ";";
	start = scookie.indexOf(kword);
	if (start != -1){
		end = scookie.indexOf(";", start);
		kdata = unescape(scookie.substring(start + kword.length, end));
	}
	if(!isNumber(kdata)){
		//console.log("undefined　or NaN : "+kword);
		return 0;
	}
	return parseInt(kdata);
}

//指定のクッキーを設定
function setCookie(name,value){
	var expire = new Date();
	expire.setTime( expire.getTime() + 1000 * 3600 * 24 * 365 * 100 );
	document.cookie = name+'=' + encodeURIComponent( value ) + '; expires=' + expire.toUTCString();
}

//アンロック判定関数
function unlock(){
	//console.log("unlock check");
	//NORMAL解放
	if(getCookie("HIDAMARISWING-CLEARRANK-EASY") > 0 && getCookie("HIDAMARISWING-UNLOCK-NORMAL") != 1){

		setCookie("HIDAMARISWING-UNLOCK-NORMAL",1);
		popUp("UNLOCK","NORMAL");
	}
	//HARD解放
	if(getCookie("HIDAMARISWING-CLEARRANK-NORMAL") > 0 && getCookie("HIDAMARISWING-UNLOCK-HARD") != 1){
		setCookie("HIDAMARISWING-UNLOCK-HARD",1);
		popUp("UNLOCK","HARD");
	}
	//STRAIGHT & KIRE解放
	if(getCookie("HIDAMARISWING-CLEARRANK-HARD") > 0 && getCookie("HIDAMARISWING-UNLOCK-STRAIGHT") != 1 && getCookie("HIDAMARISWING-UNLOCK-KIRE") != 1){
		setCookie("HIDAMARISWING-UNLOCK-STRAIGHT",1);
		setCookie("HIDAMARISWING-UNLOCK-KIRE",1);
		popUp("UNLOCK","STRAIGHT");
		popUp("UNLOCK","KIRE");
	}
	//YUNO解放
	if(getCookie("HIDAMARISWING-CLEARRANK-STRAIGHT") > 0 && getCookie("HIDAMARISWING-CLEARRANK-KIRE") > 0 && getCookie("HIDAMARISWING-UNLOCK-YUNO") != 1){
		setCookie("HIDAMARISWING-UNLOCK-YUNO",1);
		popUp("UNLOCK","YUNO");
	}

	//KNOCK_EX解放 真芯累計10
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-10") > 0 && getCookie("HIDAMARISWING-UNLOCK-KNOCK_EX") != 1){
		setCookie("HIDAMARISWING-UNLOCK-KNOCK_EX",1);
		popUp("UNLOCK","KNOCK_EX");
	}

	//KNOCK_HARD解放 累計飛距離10000
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-10000") > 0 && getCookie("HIDAMARISWING-UNLOCK-KNOCK_HARD") != 1){
		setCookie("HIDAMARISWING-UNLOCK-KNOCK_HARD",1);
		popUp("UNLOCK","KNOCK_HARD");
	}

	//EASY_EX解放
	if(getCookie("HIDAMARISWING-CLEARRANK-EASY") == 3 && getCookie("HIDAMARISWING-UNLOCK-EASY_EX") != 1){
		setCookie("HIDAMARISWING-UNLOCK-EASY_EX",1);
		popUp("UNLOCK","EASY_EX");
	}
}

//クッキー更新
function cookieUpdate(course_e, Point, ball_number){
	//console.log(course_e);//for debug
	//console.log(Point.num);//for debug
	//◆ほのぼの
	if(course_e === "EASY"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-EASY");
		//console.log(clearrank);
		if(Point.num >= 500 && clearrank < 3){//☆☆☆ 500
			setCookie("HIDAMARISWING-CLEARRANK-EASY",3);
			if(getCookie("HIDAMARISWING-TROPHY-EASY-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-EASY-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-EASY-RANKMAX");
			}
		}else if(Point.num >= 400 && clearrank < 2){//☆☆ 400
			setCookie("HIDAMARISWING-CLEARRANK-EASY",2);
		}else if(Point.num >= 250 && clearrank < 1){//☆ 250
			setCookie("HIDAMARISWING-CLEARRANK-EASY",1);
		}

		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-EASY-CLEAR") == 0 && Point.num >= 250){
			setCookie("HIDAMARISWING-TROPHY-EASY-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-EASY-CLEAR");
		}

		//★全真芯
		if(Point.justmeet == ball_number && getCookie("HIDAMARISWING-TROPHY-EASY-ALLJUSTMEET") == 0){
			setCookie("HIDAMARISWING-TROPHY-EASY-ALLJUSTMEET",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-EASY-ALLJUSTMEET");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-EASY")){
			if(getCookie("HIGHSCORE-EASY") != 0){
				popUp("HIGHSCORE","");
			}
			setCookie("HIGHSCORE-EASY",Point.num);
		}

	}

	//◆わくわく
	else if(course_e === "NORMAL"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-NORMAL");
		if(Point.num >= 1000 && clearrank < 3){//☆☆☆ 1000
			setCookie("HIDAMARISWING-CLEARRANK-NORMAL",3);
			if(getCookie("HIDAMARISWING-TROPHY-NORMAL-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-NORMAL-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-NORMAL-RANKMAX");
			}
		}else if(Point.num >= 800 && clearrank < 2){//☆☆ 800
			setCookie("HIDAMARISWING-CLEARRANK-NORMAL",2);
		}else if(Point.num >= 500 && clearrank < 1){//☆ 500
			setCookie("HIDAMARISWING-CLEARRANK-NORMAL",1);
		}

		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-NORMAL-CLEAR") == 0 && Point.num >= 500){
			setCookie("HIDAMARISWING-TROPHY-NORMAL-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-NORMAL-CLEAR");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-NORMAL")){
			if(getCookie("HIGHSCORE-NORMAL") != 0){
				popUp("HIGHSCORE","");
			}
			setCookie("HIGHSCORE-NORMAL",Point.num);
		}

	}

	//◆どきどき
	else if(course_e === "HARD"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-HARD");
		if(Point.num >= 1000 && clearrank < 3){//☆☆☆ 1000
			setCookie("HIDAMARISWING-CLEARRANK-HARD",3);
			if(getCookie("HIDAMARISWING-TROPHY-HARD-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-HARD-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-HARD-RANKMAX");
			}
		}else if(Point.num >= 800 && clearrank < 2){//☆☆ 800
			setCookie("HIDAMARISWING-CLEARRANK-HARD",2);
		}else if(Point.num >= 500 && clearrank < 1){//☆ 500
			setCookie("HIDAMARISWING-CLEARRANK-HARD",1);
		}

		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-HARD-CLEAR") == 0 && Point.num >= 500){
			setCookie("HIDAMARISWING-TROPHY-HARD-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-HARD-CLEAR");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-HARD")){
			if(getCookie("HIGHSCORE-HARD") != 0){
				popUp("HIGHSCORE","");
			}
			setCookie("HIGHSCORE-HARD",Point.num);
		}
	}

	//◆まっすぐ
	else if(course_e === "STRAIGHT"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-STRAIGHT");
		if(Point.num >= 1000 && clearrank < 3){//☆☆☆ 1000
			setCookie("HIDAMARISWING-CLEARRANK-STRAIGHT",3);
			if(getCookie("HIDAMARISWING-TROPHY-STRAIGHT-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-STRAIGHT-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-STRAIGHT-RANKMAX");
			}
		}else if(Point.num >= 800 && clearrank < 2){//☆☆ 800
			setCookie("HIDAMARISWING-CLEARRANK-STRAIGHT",2);
		}else if(Point.num >= 500 && clearrank < 1){//☆ 500
			setCookie("HIDAMARISWING-CLEARRANK-STRAIGHT",1);
		}

		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-STRAIGHT-CLEAR") == 0 && Point.num >= 500){
			setCookie("HIDAMARISWING-TROPHY-STRAIGHT-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-STRAIGHT-CLEAR");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-STRAIGHT")){
			if(getCookie("HIGHSCORE-STRAIGHT") != 0){
				popUp("HIGHSCORE","");
			}
			setCookie("HIGHSCORE-STRAIGHT",Point.num);
		}
	}

	//◆きれきれ
	else if(course_e === "KIRE"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-KIRE");
		if(Point.num >= 1000 && clearrank < 3){//☆☆☆ 1000
			setCookie("HIDAMARISWING-CLEARRANK-KIRE",3);
			if(getCookie("HIDAMARISWING-TROPHY-KIRE-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-KIRE-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-KIRE-RANKMAX");
			}
		}else if(Point.num >= 800 && clearrank < 2){//☆☆ 800
			setCookie("HIDAMARISWING-CLEARRANK-KIRE",2);
		}else if(Point.num >= 500 && clearrank < 1){//☆ 500
			setCookie("HIDAMARISWING-CLEARRANK-KIRE",1);
		}

		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-KIRE-CLEAR") == 0 && Point.num >= 500){
			setCookie("HIDAMARISWING-TROPHY-KIRE-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KIRE-CLEAR");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-KIRE")){
			if(getCookie("HIGHSCORE-KIRE") != 0){
				popUp("HIGHSCORE","");
			}
			setCookie("HIGHSCORE-KIRE",Point.num);
		}
	}

	//◆ゆのさま
	else if(course_e === "YUNO"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-YUNO");
		if(Point.num >= 800 && clearrank < 3){//☆☆☆ 800
			setCookie("HIDAMARISWING-CLEARRANK-YUNO",3);
			if(getCookie("HIDAMARISWING-TROPHY-YUNO-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-YUNO-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-YUNO-RANKMAX");
			}
		}else if(Point.num >= 600 && clearrank < 2){//☆☆ 600
			setCookie("HIDAMARISWING-CLEARRANK-YUNO",2);
		}else if(Point.num >= 400 && clearrank < 1){//☆ 400
			setCookie("HIDAMARISWING-CLEARRANK-YUNO",1);
		}

		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-YUNO-CLEAR") == 0 && Point.num >= 400){
			setCookie("HIDAMARISWING-TROPHY-YUNO-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-YUNO-CLEAR");
		}

		//★真芯で返す
		if(getCookie("HIDAMARISWING-TROPHY-YUNO-JUSTMEET") == 0 && Point.justmeet > 0){
			setCookie("HIDAMARISWING-TROPHY-YUNO-JUSTMEET",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-YUNO-JUSTMEET");
		}
		//★空振りしない
		if(getCookie("HIDAMARISWING-TROPHY-YUNO-NOMISS") == 0 && Point.miss == 0){
			setCookie("HIDAMARISWING-TROPHY-YUNO-NOMISS",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-YUNO-NOMISS");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-YUNO")){
			if(getCookie("HIGHSCORE-YUNO") != 0){
				popUp("HIGHSCORE","");
			}
			setCookie("HIGHSCORE-YUNO",Point.num);
		}
	}

	//◆100本ノック
	else if(course_e === "KNOCK"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-KNOCK");
		if(Point.num >= 8000 && clearrank < 3){//☆☆☆ 8000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK",3);
			if(getCookie("HIDAMARISWING-TROPHY-KNOCK-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-KNOCK-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK-RANKMAX");
			}
		}else if(Point.num >= 5000 && clearrank < 2){//☆☆ 5000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK",2);
		}else if(Point.num >= 3000 && clearrank < 1){//☆ 3000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK",1);
		}

		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-KNOCK-CLEAR") == 0 && Point.num >= 3000){
			setCookie("HIDAMARISWING-TROPHY-KNOCK-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK-CLEAR");
		}


		if(getCookie("HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-20") == 0 && Point.justmeet >= 20){//★真芯20
			setCookie("HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-20",1);
			popUp("TROPHY","KNOCK-JUSTMEET-20");
		}

		if(getCookie("HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-10") == 0 && Point.justmeet >= 10){//★真芯10
			setCookie("HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-10",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-10");
		}

		if(getCookie("HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-5") == 0 && Point.justmeet >= 5){//★真芯5
			setCookie("HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-5",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK-JUSTMEET-5");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-KNOCK")){
			if(getCookie("HIGHSCORE-KNOCK") != 0){
				popUp("HIGHSCORE","");
			}	
			setCookie("HIGHSCORE-KNOCK",Point.num);
		}

	}

	//◆バンザイノック
	else if(course_e === "KNOCK_EX"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-KNOCK_EX");
		if(Point.num >= 10000 && clearrank < 3){//☆☆☆ 10000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK_EX",3);
			if(getCookie("HIDAMARISWING-TROPHY-KNOCK_EX-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-KNOCK_EX-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_EX-RANKMAX");
			}
		}else if(Point.num >= 8000 && clearrank < 2){//☆☆ 8000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK_EX",2);
		}else if(Point.num >= 5000 && clearrank < 1){//☆ 5000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK_EX",1);
		}
		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-KNOCK_EX-CLEAR") == 0 && Point.num >= 5000){
			setCookie("HIDAMARISWING-TROPHY-KNOCK_EX-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_EX-CLEAR");
		}

		if(getCookie("HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-50") == 0 && Point.justmeet >= 50){//★真芯50
			setCookie("HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-50",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-50");
		}

		if(getCookie("HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-25") == 0 && Point.justmeet >= 25){//★真芯25
			setCookie("HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-25",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-25");
		}

		if(getCookie("HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-10") == 0 && Point.justmeet >= 10){//★真芯10
			setCookie("HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-10",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-10");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-KNOCK_EX")){
			if(getCookie("HIGHSCORE-KNOCK_EX") != 0){
				popUp("HIGHSCORE","");
			}	
			setCookie("HIGHSCORE-KNOCK_EX",Point.num);
		}
	}

	//どきどきノック
	else if(course_e === "KNOCK_HARD"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-KNOCK_HARD");
		if(Point.num >= 8000 && clearrank < 3){//☆☆☆ 8000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK_HARD",3);
			if(getCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_HARD-RANKMAX");
			}
		}else if(Point.num >= 5000 && clearrank < 2){//☆☆ 5000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK_HARD",2);
		}else if(Point.num >= 3000 && clearrank < 1){//☆ 3000
			setCookie("HIDAMARISWING-CLEARRANK-KNOCK_HARD",1);
		}

		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-CLEAR") == 0 && Point.num >= 3000){
			setCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_HARD-CLEAR");
		}

		if(getCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-15") == 0 && Point.justmeet >= 15){//★真芯15
			setCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-15",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_EX-JUSTMEET-15");
		}

		if(getCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-10") == 0 && Point.justmeet >= 10){//★真芯10
			setCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-10",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-10");
		}

		if(getCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-5") == 0 && Point.justmeet >= 5){//★真芯5
			setCookie("HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-5",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-KNOCK_HARD-JUSTMEET-5");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-KNOCK_HARD")){
			if(getCookie("HIGHSCORE-KNOCK_HARD") != 0){
				popUp("HIGHSCORE","");
			}	
			setCookie("HIGHSCORE-KNOCK_HARD",Point.num);
		}
	}

	//◆ほのぼのSP
	else if(course_e === "EASY_EX"){
		var clearrank = getCookie("HIDAMARISWING-CLEARRANK-EASY_EX");
		if(Point.num >= 500 && clearrank < 3){//☆☆☆ 500
			setCookie("HIDAMARISWING-CLEARRANK-EASY_EX",3);
			if(getCookie("HIDAMARISWING-TROPHY-EASY_EX-RANKMAX") == 0){
				setCookie("HIDAMARISWING-TROPHY-EASY_EX-RANKMAX",1);
				popUp("TROPHY","HIDAMARISWING-TROPHY-EASY_EX-RANKMAX");
			}
		}else if(Point.num >= 400 && clearrank < 2){//☆☆ 400
			setCookie("HIDAMARISWING-CLEARRANK-EASY_EX",2);
		}else if(Point.num >= 250 && clearrank < 1){//☆ 250
			setCookie("HIDAMARISWING-CLEARRANK-EASY_EX",1);
		}
		//クリアトロフィー
		if(getCookie("HIDAMARISWING-TROPHY-EASY_EX-CLEAR") == 0 && Point.num >= 250){
			setCookie("HIDAMARISWING-TROPHY-EASY_EX-CLEAR",1);
			popUp("TROPHY","HIDAMARISWING-TROPHY-EASY_EX-CLEAR");
		}

		//ハイスコア更新
		if(Point.num >= getCookie("HIGHSCORE-EASY_EX")){
			if(getCookie("HIGHSCORE-EASY_EX") != 0){
				popUp("HIGHSCORE","");
			}	
			setCookie("HIGHSCORE-EASY_EX",Point.num);
		}

	}

	var countGamePlay = getCookie("HIDAMARISWING-TOTAL-GAMEPLAY");
	countGamePlay ++;
	setCookie("HIDAMARISWING-TOTAL-GAMEPLAY", countGamePlay);

	//100回プレイ
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-GAMEPLAY-100") == 0 && getCookie("HIDAMARISWING-TOTAL-GAMEPLAY") >= 100){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-GAMEPLAY-100",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-GAMEPLAY-100");
	}

	//アンロック判定
	unlock();
}

function addCount(ball){
	if(ball['hit_se'] == 'sound/hit_ex.wav'){
		var countJustMeet = getCookie("HIDAMARISWING-TOTAL-JUSTMEET");
		countJustMeet++;
		setCookie("HIDAMARISWING-TOTAL-JUSTMEET", countJustMeet);
	}

	//飛距離0なら空振り
	if(ball['score'] == 0){
		var countMiss = getCookie("HIDAMARISWING-TOTAL-MISS");
		countMiss++;
		setCookie("HIDAMARISWING-TOTAL-MISS", countMiss);
	}else{
		var countHit = getCookie("HIDAMARISWING-TOTAL-HIT");
		countHit ++;
		setCookie("HIDAMARISWING-TOTAL-HIT", countHit);
	}

	var countPoint = getCookie("HIDAMARISWING-TOTAL-POINT");
	countPoint += ball['score'];
	setCookie("HIDAMARISWING-TOTAL-POINT", countPoint);

	//累計飛距離1000トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-1000") == 0 && getCookie("HIDAMARISWING-TOTAL-POINT") >= 1000){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-1000",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-POINT-1000");
	}

	//累計飛距離3980トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-3980") == 0 && getCookie("HIDAMARISWING-TOTAL-POINT") >= 3980){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-3980",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-POINT-3980");
	}
	//累計飛距離10000トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-10000") == 0 && getCookie("HIDAMARISWING-TOTAL-POINT") >= 10000){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-10000",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-POINT-10000");
	}

	//累計飛距離100000トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-100000") == 0 && getCookie("HIDAMARISWING-TOTAL-POINT") >= 100000){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-POINT-100000",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-POINT-100000");
	}

	//初真芯トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-1") == 0 && getCookie("HIDAMARISWING-TOTAL-JUSTMEET") >= 1){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-1",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-1");
	}

	//真芯10トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-10") == 0 && getCookie("HIDAMARISWING-TOTAL-JUSTMEET") >= 10){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-10",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-10");
	}
	//真芯50トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-50") == 0 && getCookie("HIDAMARISWING-TOTAL-JUSTMEET") >= 50){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-50",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-50");
	}
	//真芯100トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-100") == 0 && getCookie("HIDAMARISWING-TOTAL-JUSTMEET") >= 100){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-100",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-100");
	}
	//真芯365トロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-365") == 0 && getCookie("HIDAMARISWING-TOTAL-JUSTMEET") >= 365){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-365",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-JUSTMEET-365");
	}

	//空振りトロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-MISS-1") == 0 && getCookie("HIDAMARISWING-TOTAL-MISS") >= 1){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-MISS-1",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-MISS-1");
	}
	//100回空振りトロフィー
	if(getCookie("HIDAMARISWING-TROPHY-TOTAL-MISS-100") == 0 && getCookie("HIDAMARISWING-TOTAL-MISS") >= 100){
		setCookie("HIDAMARISWING-TROPHY-TOTAL-MISS-100",1);
		popUp("TROPHY","HIDAMARISWING-TROPHY-TOTAL-MISS-100");
	}

	unlock();
}

function popUp(type,data_name){
	var popup_count = 0;
	for(var i = 0;;i++){
		if($(".pop"+i).length === 0){
			popup_count = i;
			break;
		}
	}
	//画面のscaleの値
	var matrix_value = new WebKitCSSMatrix($('#enchant-stage').find('div').css('-webkit-transform')).a;
	//すこしずらしたかったら
	//matrix_value = (matrix_value+0.1) * 10;
	//とかにして調節してね
	matrix_value = (matrix_value) * 10;
	matrix_value = Math.round(matrix_value) / 10;

	//実際サイズの高さ分ずらす
	var css_top = ((popup_count *  24 + 5) *matrix_value)* 0.95;
	var css_left = (5 * matrix_value )* 0.95;
	if(type == "TROPHY"){
		$('#enchant-stage').append("<div class=\"popup pop" + popup_count + "\">★実績解除：" + TROPHY_DATA[data_name]['name'] + "</div>");
	}else if(type == "UNLOCK"){
		$('#enchant-stage').append("<div class=\"popup pop" + popup_count + "\">[!] " + COURSE_DATA[data_name]['name'] + "解禁！</div>");
	}else if(type == "HIGHSCORE"){
		$('#enchant-stage').append("<div class=\"popup pop" + popup_count + "\">ハイスコアが更新されました！</div>");
	}

	var scale = $('#enchant-stage').find('div').css('-webkit-transform');

	$('.pop' + popup_count).css({
		'display':'block',
		'-webkit-transform-origin':'0px 0px',
		'-webkit-transform':scale,
		'top':css_top,
		'left':css_left
	});

	setTimeout( function() {
		$('.pop' + popup_count).animate(
			{'opacity':'0.9'},
			'fast'
		);
	}, $(".popup").length * 50);

	setTimeout( function() {
		$('.pop' + popup_count).animate({opacity:0,},
			{duration:'fast',complete:
			function(){
				$('.pop' + popup_count).remove();
			},
		});
	}, 4000);
}