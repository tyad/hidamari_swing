var TROPHY_DATA = {
	"TROPHY-EASY-CLEAR":{
		"name":"はじまり",
		"text":"ほのぼのコースをクリア"
	},
	"TROPHY-EASY-RANKMAX":{
		"name":"芽生えドライブ",
		"text":"ほのぼのコースで★★★"
	},
	"TROPHY-EASY-ALLJUSTMEET":{
		"name":"カッキーン！",
		"text":"ほのぼのコースで全ての球を真芯ヒットさせた"
	},

	"TROPHY-NORMAL-CLEAR":{
		"name":"わくわく",
		"text":"わくわくコースをクリア"
	},
	"TROPHY-NORMAL-RANKMAX":{
		"name":"流星レコード",
		"text":"わくわくコースで★★★"
	},

	"TROPHY-HARD-CLEAR":{
		"name":"どきどき",
		"text":"どきどきコースをクリア"
	},
	"TROPHY-HARD-RANKMAX":{
		"name":"あやふやロケット",
		"text":"どきどきコースで★★★"
	},

	"TROPHY-STRAIGHT-CLEAR":{
		"name":"ノビのび",
		"text":"まっすぐコースをクリア"
	},
	"TROPHY-STRAIGHT-RANKMAX":{
		"name":"なんかいいキモチ",
		"text":"まっすぐコースで★★★"
	},

	"TROPHY-KIRE-CLEAR":{
		"name":"キレもの",
		"text":"きれきれコースをクリア"
	},
	"TROPHY-KIRE-RANKMAX":{
		"name":"なればいいカンジ",
		"text":"きれきれコースで★★★"
	},

	"TROPHY-YUNO-CLEAR":{
		"name":"ゆのさま",
		"text":"ゆのさまをクリア"
	},
	"TROPHY-YUNO-RANKMAX":{
		"name":"VIP",
		"text":"ゆのさまで★★★"
	},
	"TROPHY-YUNO-JUSTMEET":{
		"name":"とんでけー",
		"text":"ゆのさまで真芯ヒットする"
	},
	"TROPHY-YUNO-NOMISS":{
		"name":"ねばりうち",
		"text":"ゆのさまで空振りしない"
	},

	"TROPHY-KNOCK-CLEAR":{
		"name":"おつかれさま",
		"text":"100本ノックをクリア"
	},
	"TROPHY-KNOCK-RANKMAX":{
		"name":"アベレージヒッター",
		"text":"100本ノックで★★★"
	},
	"TROPHY-KNOCK-JUSTMEET-5":{
		"name":"きっちり",
		"text":"100本ノックで1プレイ真芯5回以上"
	},
	"TROPHY-KNOCK-JUSTMEET-10":{
		"name":"どんぴしゃ",
		"text":"100本ノックで1プレイ真芯10回以上"
	},
	"TROPHY-KNOCK-JUSTMEET-20":{
		"name":"パワーヒッター",
		"text":"100本ノックで1プレイ真芯20回以上"
	},


	"TROPHY-EASY_EX-CLEAR":{
		"name":"ずっしり",
		"text":"ほのぼのコース×SPをクリア"
	},
	"TROPHY-EASY_EX-RANKMAX":{
		"name":"あららできちゃった",
		"text":"ほのぼのコース×SPで★★★"
	},

	"TROPHY-KNOCK_EX-CLEAR":{
		"name":"わっしょい",
		"text":"バンザイノックをクリア"
	},
	"TROPHY-KNOCK_EX-RANKMAX":{
		"name":"わしょしょい",
		"text":"バンザイノックで★★★"
	},
	"TROPHY-KNOCK_EX-JUSTMEET-10":{
		"name":"かっとび",
		"text":"バンザイノックで1プレイ真芯10回以上"
	},
	"TROPHY-KNOCK_EX-JUSTMEET-25":{
		"name":"ふっとび",
		"text":"バンザイノックで1プレイ真芯25回以上"
	},
	"TROPHY-KNOCK_EX-JUSTMEET-50":{
		"name":"ぶっとび",
		"text":"バンザイノックで1プレイ真芯50回以上"
	},

	"TROPHY-KNOCK_HARD-CLEAR":{
		"name":"はなまる",
		"text":"どきどきノックをクリア"
	},
	"TROPHY-KNOCK_HARD-RANKMAX":{
		"name":"いぶし銀",
		"text":"どきどきノックで★★★"
	},


	"TROPHY-TOTAL-JUSTMEET-1":{
		"name":"ガツーン！",
		"text":"初めて真芯でヒットさせた"
	},
	"TROPHY-TOTAL-JUSTMEET-10":{
		"name":"ドカーン！",
		"text":"10回真芯ヒットさせた"
	},
	"TROPHY-TOTAL-JUSTMEET-100":{
		"name":"芸術的な爆発",
		"text":"100回真芯ヒットさせた"
	},
	"TROPHY-TOTAL-JUSTMEET-365":{
		"name":"打撃爆発×365",
		"text":"365回真芯ヒットさせた"
	},

	"TROPHY-TOTAL-POINT-1000":{
		"name":"さてさて",
		"text":"累計1000m飛ばした"
	},
	"TROPHY-TOTAL-POINT-3980":{
		"name":"それでそれで",
		"text":"累計3980m飛ばした"
	},
	"TROPHY-TOTAL-POINT-10000":{
		"name":"そんでもって",
		"text":"累計10000m飛ばした"
	},
	"TROPHY-TOTAL-POINT-100000":{
		"name":"ひだまりスラッガー",
		"text":"累計100000m飛ばした"
	},

	"TROPHY-TOTAL-MISS-100":{
		"name":"あらら",
		"text":"100回空振りした(見逃しも含む)"
	},

	"TROPHY-TOTAL-GAMEPLAY-100":{
		"name":"ありがとう！",
		"text":"100回遊んだ"
	}
}

var COURSE_DATA = {
	"EASY":{
		"name":"ほのぼのコース"
	},
	"NORMAL":{
		"name":"わくわくコース"
	},
	"HARD":{
		"name":"どきどきコース"
	},
	"STRAIGHT" : {
		"name":"まっすぐコース"
	},
	"KIRE" : {
		"name":"きれきれコース"
	},
	"YUNO" : {
		"name":"ゆのさま"
	},
	"KNOCK" : {
		"name":"100本ノック"
	},
	"EASY_EX" : {
		"name":"ほのぼのコース×SP"
	},
	"KNOCK_EX" : {
		"name":"バンザイノック"
	},
	"KNOCK_HARD" : {
		"name":"どきどきノック"
	}
}

//通常コース生成
function createCommonCourse(){
	var CommonCourse = ["EASY"];
	if(getCookie("UNLOCK-NORMAL") == 1){
		CommonCourse.push("NORMAL");
	}
	if(getCookie("UNLOCK-HARD") == 1){
		CommonCourse.push("HARD");
	}
	if(getCookie("UNLOCK-STRAIGHT") == 1){
		CommonCourse.push("STRAIGHT");
	}
	if(getCookie("UNLOCK-KIRE") == 1){
		CommonCourse.push("KIRE");
	}
	return CommonCourse;
}
//エクストラコース生成
function createExtraCourse(){
	var ExtraCourse = ["KNOCK"];
	if(getCookie("UNLOCK-YUNO")){
		ExtraCourse.push("YUNO");
	}
	if(getCookie("UNLOCK-KNOCK_EX")){
		ExtraCourse.push("KNOCK_EX");
	}
	if(getCookie("UNLOCK-KNOCK_HARD")){
		ExtraCourse.push("KNOCK_HARD");
	}
	if(getCookie("UNLOCK-EASY_EX")){
		ExtraCourse.push("EASY_EX");
	}
	return ExtraCourse;
}

//数字か判定関数（undefinedとNaNを避けるため）
function isNumber(x){ 
    if( typeof(x) != 'number' && typeof(x) != 'string' )
        return false;
    else 
        return (x == parseFloat(x) && isFinite(x));
}

//指定のクッキー取得
function getCookie(kword){
	kword = kword + "=";
	kdata = "";
	scookie = document.cookie + ";";
	start = scookie.indexOf(kword);
	if (start != -1){
		end = scookie.indexOf(";", start);
		kdata = unescape(scookie.substring(start + kword.length, end));
	}
	if(!isNumber(kdata)){
		console.log("undefined　or NaN : "+kword);
		return 0;
	}
	return parseInt(kdata);
}

//指定のクッキーを設定
function setCookie(name,value){
	var expire = new Date();
	expire.setTime( expire.getTime() + 1000 * 3600 * 24 * 365 * 100 );
	document.cookie = name+'=' + encodeURIComponent( value ) + '; expires=' + expire.toUTCString();
}

//アンロック判定関数
function unlock(){
	console.log("unlock check");
	//NORMAL解放
	if(getCookie("CLEARLANK-EASY") > 0 && getCookie("UNLOCK-NORMAL") != 1){

		setCookie("UNLOCK-NORMAL",1);
		popUp("UNLOCK","NORMAL");
	}
	//HARD解放
	if(getCookie("CLEARLANK-NORMAL") > 0 && getCookie("UNLOCK-HARD") != 1){
		setCookie("UNLOCK-HARD",1);
		popUp("UNLOCK","HARD");
	}
	//STRAIGHT & KIRE解放
	if(getCookie("CLEARLANK-HARD") > 0 && getCookie("UNLOCK-STRAIGHT") != 1 && getCookie("UNLOCK-KIRE") != 1){
		setCookie("UNLOCK-STRAIGHT",1);
		setCookie("UNLOCK-KIRE",1);
		popUp("UNLOCK","STRAIGHT");
		popUp("UNLOCK","KIRE");
	}
	//YUNO解放
	if(getCookie("CLEARLANK-STRAIGHT") > 0 && getCookie("CLEARLANK-KIRE") > 0 && getCookie("UNLOCK-YUNO") != 1){
		setCookie("UNLOCK-YUNO",1);
		popUp("UNLOCK","YUNO");
	}

	//KNOCK_EX解放 真芯累計10
	if(getCookie("TROPHY-TOTAL-JUSTMEET-10") > 0 && getCookie("UNLOCK-KNOCK_EX") != 1){
		setCookie("UNLOCK-KNOCK_EX",1);
		popUp("UNLOCK","KNOCK_EX");
	}

	//KNOCK_HARD解放 累計飛距離3980
	if(getCookie("TROPHY-TOTAL-POINT-3980") > 0 && getCookie("UNLOCK-KNOCK_HARD") != 1){
		setCookie("UNLOCK-KNOCK_HARD",1);
		popUp("UNLOCK","KNOCK_HARD");
	}

	
	//EASY_EX解放
	if(getCookie("CLEARLANK-EASY") == 3 && getCookie("UNLOCK-EASY_EX") != 1){
		setCookie("UNLOCK-EASY_EX",1);
		popUp("UNLOCK","EASY_EX");
	}



}

//クッキー更新
function cookieUpdate(course_e, Point, ball_number){
	console.log(course_e);//for debug
	console.log(Point.num);//for debug
	//◆ほのぼの
	if(course_e === "EASY"){
		var clearlank = getCookie("CLEARLANK-EASY");
		console.log(clearlank);
		if(Point.num >= 500 && clearlank < 3){//☆☆☆ 500
			setCookie("CLEARLANK-EASY",3);
			if(getCookie("TROPHY-EASY-RANKMAX") == 0){
				setCookie("TROPHY-EASY-RANKMAX",1);
				popUp("TROPHY","TROPHY-EASY-RANKMAX");
			}
		}else if(Point.num >= 400 && clearlank < 2){//☆☆ 400
			setCookie("CLEARLANK-EASY",2);
		}else if(Point.num >= 250 && clearlank < 1){//☆ 250
			setCookie("CLEARLANK-EASY",1);
		}

		//クリアトロフィー
		if(getCookie("TROPHY-EASY-CLEAR") == 0 && Point.num >= 250){
			setCookie("TROPHY-EASY-CLEAR",1);
			popUp("TROPHY","TROPHY-EASY-CLEAR");
		}

		//★全真芯
		if(Point.justmeet == ball_number && getCookie("TROPHY-EASY-ALLJUSTMEET") == 0){
			setCookie("TROPHY-EASY-ALLJUSTMEET",1);
			popUp("TROPHY","TROPHY-EASY-ALLJUSTMEET");
		}

	}
	//◆わくわく
	else if(course_e === "NORMAL"){
		var clearlank = getCookie("CLEARLANK-NORMAL");
		if(Point.num >= 1000 && clearlank < 3){//☆☆☆ 1000
			setCookie("CLEARLANK-NORMAL",3);
			if(getCookie("TROPHY-NORMAL-RANKMAX") == 0){
				setCookie("TROPHY-NORMAL-RANKMAX",1);
				popUp("TROPHY","TROPHY-NORMAL-RANKMAX");
			}
		}else if(Point.num >= 800 && clearlank < 2){//☆☆ 800
			setCookie("CLEARLANK-NORMAL",2);
		}else if(Point.num >= 500 && clearlank < 1){//☆ 500
			setCookie("CLEARLANK-NORMAL",1);
		}

		//クリアトロフィー
		if(getCookie("TROPHY-NORMAL-CLEAR") == 0 && Point.num >= 500){
			setCookie("TROPHY-NORMAL-CLEAR",1);
			popUp("TROPHY","TROPHY-NORMAL-CLEAR");
		}

	}
	//◆どきどき
	else if(course_e === "HARD"){
		var clearlank = getCookie("CLEARLANK-HARD");
		if(Point.num >= 1000 && clearlank < 3){//☆☆☆ 1000
			setCookie("CLEARLANK-HARD",3);
			if(getCookie("TROPHY-HARD-RANKMAX") == 0){
				setCookie("TROPHY-HARD-RANKMAX",1);
				popUp("TROPHY","TROPHY-HARD-RANKMAX");
			}
		}else if(Point.num >= 800 && clearlank < 2){//☆☆ 800
			setCookie("CLEARLANK-HARD",2);
		}else if(Point.num >= 500 && clearlank < 1){//☆ 500
			setCookie("CLEARLANK-HARD",1);
		}

		//クリアトロフィー
		if(getCookie("TROPHY-HARD-CLEAR") == 0 && Point.num >= 500){
			setCookie("TROPHY-HARD-CLEAR",1);
			popUp("TROPHY","TROPHY-HARD-CLEAR");
		}

	}
	//◆まっすぐ
	else if(course_e === "STRAIGHT"){
		var clearlank = getCookie("CLEARLANK-STRAIGHT");
		if(Point.num >= 1000 && clearlank < 3){//☆☆☆ 1000
			setCookie("CLEARLANK-STRAIGHT",3);
			if(getCookie("TROPHY-STRAIGHT-RANKMAX") == 0){
				setCookie("TROPHY-STRAIGHT-RANKMAX",1);
				popUp("TROPHY","TROPHY-STRAIGHT-RANKMAX");
			}
		}else if(Point.num >= 800 && clearlank < 2){//☆☆ 800
			setCookie("CLEARLANK-STRAIGHT",2);
		}else if(Point.num >= 500 && clearlank < 1){//☆ 500
			setCookie("CLEARLANK-STRAIGHT",1);
		}

		//クリアトロフィー
		if(getCookie("TROPHY-STRAIGHT-CLEAR") == 0 && Point.num >= 500){
			setCookie("TROPHY-STRAIGHT-CLEAR",1);
			popUp("TROPHY","TROPHY-STRAIGHT-CLEAR");
		}
	}
	//◆きれきれ
	else if(course_e === "KIRE"){
		var clearlank = getCookie("CLEARLANK-KIRE");
		if(Point.num >= 1000 && clearlank < 3){//☆☆☆ 1000
			setCookie("CLEARLANK-KIRE",3);
			if(getCookie("TROPHY-KIRE-RANKMAX") == 0){
				setCookie("TROPHY-KIRE-RANKMAX",1);
				popUp("TROPHY","TROPHY-KIRE-RANKMAX");
			}
		}else if(Point.num >= 800 && clearlank < 2){//☆☆ 800
			setCookie("CLEARLANK-KIRE",2);
		}else if(Point.num >= 500 && clearlank < 1){//☆ 500
			setCookie("CLEARLANK-KIRE",1);
		}

		//クリアトロフィー
		if(getCookie("TROPHY-KIRE-CLEAR") == 0 && Point.num >= 500){
			setCookie("TROPHY-KIRE-CLEAR",1);
			popUp("TROPHY","TROPHY-KIRE-CLEAR");
		}

		/*お好きにどうぞ
		//★空振りしない
		if(Point.miss == 0){
		
		}
		*/
	}
	//◆ゆのさま
	else if(course_e === "YUNO"){
		var clearlank = getCookie("CLEARLANK-YUNO");
		if(Point.num >= 900 && clearlank < 3){//☆☆☆ 800
			setCookie("CLEARLANK-YUNO",3);
			if(getCookie("TROPHY-YUNO-RANKMAX") == 0){
				setCookie("TROPHY-YUNO-RANKMAX",1);
				popUp("TROPHY","TROPHY-YUNO-RANKMAX");
			}
		}else if(Point.num >= 700 && clearlank < 2){//☆☆ 600
			setCookie("CLEARLANK-YUNO",2);
		}else if(Point.num >= 400 && clearlank < 1){//☆ 400
			setCookie("CLEARLANK-YUNO",1);
		}

		//クリアトロフィー
		if(getCookie("TROPHY-YUNO-CLEAR") == 0 && Point.num >= 400){
			setCookie("TROPHY-YUNO-CLEAR",1);
			popUp("TROPHY","TROPHY-YUNO-CLEAR");
		}

		//★真芯で返す
		if(getCookie("TROPHY-YUNO-JUSTMEET") == 0 && Point.justmeet > 0){
			setCookie("TROPHY-YUNO-JUSTMEET",1);
			popUp("TROPHY","TROPHY-YUNO-JUSTMEET");
		}
		//★空振りしない
		if(getCookie("TROPHY-YUNO-NOMISS") == 0 && Point.miss == 0){
			setCookie("TROPHY-YUNO-NOMISS",1);
			popUp("TROPHY","TROPHY-YUNO-NOMISS");
		}

		
	}
	//◆100本ノック
	else if(course_e === "KNOCK"){
		var clearlank = getCookie("CLEARLANK-KNOCK");
		if(Point.num >= 8000 && clearlank < 3){//☆☆☆ 8000
			setCookie("CLEARLANK-KNOCK",3);
			if(getCookie("TROPHY-KNOCK-RANKMAX") == 0){
				setCookie("TROPHY-KNOCK-RANKMAX",1);
				popUp("TROPHY","TROPHY-KNOCK-RANKMAX");
			}
		}else if(Point.num >= 5000 && clearlank < 2){//☆☆ 5000
			setCookie("CLEARLANK-KNOCK",2);
		}else if(Point.num >= 3000 && clearlank < 1){//☆ 3000
			setCookie("CLEARLANK-KNOCK",1);
		}

		//クリアトロフィー
		if(getCookie("TROPHY-KNOCK-CLEAR") == 0 && Point.num >= 3000){
			setCookie("TROPHY-KNOCK-CLEAR",1);
			popUp("TROPHY","TROPHY-KNOCK-CLEAR");
		}


		if(getCookie("TROPHY-KNOCK-JUSTMEET-20") == 0 && Point.justmeet >= 20){//★真芯20
			setCookie("TROPHY-KNOCK-JUSTMEET-20",1);
			popUp("TROPHY","KNOCK-JUSTMEET-20";
		}

		if(getCookie("TROPHY-KNOCK-JUSTMEET-10") == 0 && Point.justmeet >= 10){//★真芯10
			setCookie("TROPHY-KNOCK-JUSTMEET-10",1);
			popUp("TROPHY","TROPHY-KNOCK-JUSTMEET-10");
		}

		if(getCookie("TROPHY-KNOCK-JUSTMEET-5") == 0 && Point.justmeet >= 5){//★真芯5
			setCookie("TROPHY-KNOCK-JUSTMEET-5",1);
			popUp("TROPHY","TROPHY-KNOCK-JUSTMEET-5");
		}

	}
	//◆バンザイノック
	else if(course_e === "KNOCK_EX"){
		var clearlank = getCookie("CLEARLANK-KNOCK_EX");
		if(Point.num >= 10000 && clearlank < 3){//☆☆☆ 10000
			setCookie("CLEARLANK-KNOCK_EX",3);
			if(getCookie("TROPHY-KNOCK_EX-RANKMAX") == 0){
				setCookie("TROPHY-KNOCK_EX-RANKMAX",1);
				popUp("TROPHY","TROPHY-KNOCK_EX-RANKMAX");
			}
		}else if(Point.num >= 8000 && clearlank < 2){//☆☆ 8000
			setCookie("CLEARLANK-KNOCK_EX",2);
		}else if(Point.num >= 5000 && clearlank < 1){//☆ 5000
			setCookie("CLEARLANK-KNOCK_EX",1);
		}
		//クリアトロフィー
		if(getCookie("TROPHY-KNOCK_EX-CLEAR") == 0 && Point.num >= 5000){
			setCookie("TROPHY-KNOCK_EX-CLEAR",1);
			popUp("TROPHY","TROPHY-KNOCK_EX-CLEAR");
		}

		if(getCookie("TROPHY-KNOCK_EX-JUSTMEET-50") == 0 && Point.justmeet >= 50){//★真芯50
			setCookie("TROPHY-KNOCK_EX-JUSTMEET-50",1);
			popUp("TROPHY","TROPHY-KNOCK_EX-JUSTMEET-50");
		}

		if(getCookie("TROPHY-KNOCK_EX-JUSTMEET-25") == 0 && Point.justmeet >= 25){//★真芯25
			setCookie("TROPHY-KNOCK_EX-JUSTMEET-25",1);
			popUp("TROPHY","TROPHY-KNOCK_EX-JUSTMEET-25");
		}

		if(getCookie("TROPHY-KNOCK_EX-JUSTMEET-10") == 0 && Point.justmeet >= 10){//★真芯10
			setCookie("TROPHY-KNOCK_EX-JUSTMEET-10",1);
			popUp("TROPHY","TROPHY-KNOCK_EX-JUSTMEET-10");
		}
	}

	else if(course_e === "KNOCK_HARD"){
		var clearlank = getCookie("CLEARLANK-KNOCK_HARD");
		if(Point.num >= 5000 && clearlank < 3){//☆☆☆ 8000
			setCookie("CLEARLANK-KNOCK_HARD",3);
			if(getCookie("TROPHY-KNOCK_HARD-RANKMAX") == 0){
				setCookie("TROPHY-KNOCK_HARD-RANKMAX",1);
				popUp("TROPHY","TROPHY-KNOCK_HARD-RANKMAX");
			}
		}else if(Point.num >= 4000 && clearlank < 2){//☆☆ 5000
			setCookie("CLEARLANK-KNOCK_HARD",2);
		}else if(Point.num >= 2000 && clearlank < 1){//☆ 3000
			setCookie("CLEARLANK-KNOCK_HARD",1);
		}

		//クリアトロフィー
		if(getCookie("TROPHY-KNOCK_HARD-CLEAR") == 0 && Point.num >= 3000){
			setCookie("TROPHY-KNOCK_HARD-CLEAR",1);
			popUp("TROPHY","TROPHY-KNOCK_HARD-CLEAR");
		}
		
	}

	//◆ほのぼのSP
	else if(course_e === "EASY_EX"){
		var clearlank = getCookie("CLEARLANK-EASY_EX");
		if(Point.num >= 500 && clearlank < 3){//☆☆☆ 500
			setCookie("CLEARLANK-EASY_EX",3);
			if(getCookie("TROPHY-EASY_EX-RANKMAX") == 0){
				setCookie("TROPHY-EASY_EX-RANKMAX",1);
				popUp("TROPHY","TROPHY-EASY_EX-RANKMAX");
			}
		}else if(Point.num >= 400 && clearlank < 2){//☆☆ 400
			setCookie("CLEARLANK-EASY_EX",2);
		}else if(Point.num >= 250 && clearlank < 1){//☆ 250
			setCookie("CLEARLANK-EASY_EX",1);
		}
		//クリアトロフィー
		if(getCookie("TROPHY-EASY_EX-CLEAR") == 0 && Point.num >= 250){
			setCookie("TROPHY-EASY_EX-CLEAR",1);
			popUp("TROPHY","TROPHY-EASY_EX-CLEAR");
		}

	}

	var countGamePlay = getCookie("TOTAL-GAMEPLAY");
	countGamePlay ++;
	setCookie("TOTAL-GAMEPLAY", countGamePlay);

	//100回プレイ
	if(getCookie("TROPHY-TOTAL-GAMEPLAY-100") == 0 && getCookie("TOTAL-GAMEPLAY") >= 100){
		setCookie("TROPHY-TOTAL-GAMEPLAY-100",1);
		popUp("TROPHY","TROPHY-TOTAL-GAMEPLAY-100");
	}

	//アンロック判定
	unlock();
}

function addCount(ball){
	if(ball['hit_se'] == 'sound/hit_ex.wav'){
		var countJustMeet = getCookie("TOTAL-JUSTMEET");
		countJustMeet++;
		setCookie("TOTAL-JUSTMEET", countJustMeet);
	}


	//飛距離0なら空振り
	if(ball['score'] == 0){
		var countMiss = getCookie("TOTAL-MISS");
		countMiss++;
		setCookie("TOTAL-MISS", countMiss);
	}else{
		var countHit = getCookie("TOTAL-HIT");
		countHit ++;
		setCookie("TOTAL-HIT", countHit);
	}

	var countPoint = getCookie("TOTAL-POINT");
	countPoint += ball['score'];
	setCookie("TOTAL-POINT", countPoint);

	//累計飛距離1000トロフィー
	if(getCookie("TROPHY-TOTAL-POINT-1000") == 0 && getCookie("TOTAL-POINT") >= 1000){
		setCookie("TROPHY-TOTAL-POINT-1000",1);
		popUp("TROPHY","TROPHY-TOTAL-POINT-1000");
	}

	//累計飛距離3980トロフィー
	if(getCookie("TROPHY-TOTAL-POINT-3980") == 0 && getCookie("TOTAL-POINT") >= 3980){
		setCookie("TROPHY-TOTAL-POINT-3980",1);
		popUp("TROPHY","TROPHY-TOTAL-POINT-3980");
	}
	//累計飛距離10000トロフィー
	if(getCookie("TROPHY-TOTAL-POINT-10000") == 0 && getCookie("TOTAL-POINT") >= 10000){
		setCookie("TROPHY-TOTAL-POINT-10000",1);
		popUp("TROPHY","TROPHY-TOTAL-POINT-10000");
	}

	//累計飛距離100000トロフィー
	if(getCookie("TROPHY-TOTAL-POINT-100000") == 0 && getCookie("TOTAL-POINT") >= 10000){
		setCookie("TROPHY-TOTAL-POINT-100000",1);
		popUp("TROPHY","TROPHY-TOTAL-POINT-100000");
	}

	//初真芯トロフィー
	if(getCookie("TROPHY-TOTAL-JUSTMEET-1") == 0 && getCookie("TOTAL-JUSTMEET") >= 1){
		setCookie("TROPHY-TOTAL-JUSTMEET-1",1);
		popUp("TROPHY","TROPHY-TOTAL-JUSTMEET-1");
	}

	//真芯10トロフィー
	if(getCookie("TROPHY-TOTAL-JUSTMEET-10") == 0 && getCookie("TOTAL-JUSTMEET") >= 10){
		setCookie("TROPHY-TOTAL-JUSTMEET-10",1);
		popUp("TROPHY","TROPHY-TOTAL-JUSTMEET-10");
	}
	//真芯100トロフィー
	if(getCookie("TROPHY-TOTAL-JUSTMEET-100") == 0 && getCookie("TOTAL-JUSTMEET") >= 100){
		setCookie("TROPHY-TOTAL-JUSTMEET-100",1);
		popUp("TROPHY","TROPHY-TOTAL-JUSTMEET-100");
	}
	//真芯365トロフィー
	if(getCookie("TROPHY-TOTAL-JUSTMEET-365") == 0 && getCookie("TOTAL-JUSTMEET") >= 365){
		setCookie("TROPHY-TOTAL-JUSTMEET-365",1);
		popUp("TROPHY","TROPHY-TOTAL-JUSTMEET-365");
	}


	//100回空振りトロフィー
	if(getCookie("TROPHY-TOTAL-MISS-100") == 0 && getCookie("TOTAL-MISS") >= 100){
		setCookie("TROPHY-TOTAL-MISS-100",1);
		popUp("TROPHY","TROPHY-TOTAL-MISS-100");
	}

	unlock();
}

function popUp(type,data_name){

	var popup_count = 0;
	for(var i = 0;;i++){
		if($(".pop"+i).length === 0){
			popup_count = i;
			break;
		}
	}
	//画面のscaleの値
	var matrix_value = new WebKitCSSMatrix($('#enchant-stage').find('div').css('-webkit-transform')).a;
	//すこしずらしたかったら
	//matrix_value = (matrix_value+0.1) * 10;
	//とかにして調節してね
	matrix_value = (matrix_value) * 10;
	matrix_value = Math.round(matrix_value) / 10;

	//実際サイズの高さ分ずらす
	var css_top = ((popup_count *  24 + 5) *matrix_value)* 0.95;
	var css_left = (5 * matrix_value )* 0.95;
	if(type == "TROPHY"){
		$('body').append("<div class=\"popup pop" + popup_count + "\">★実績解除：" + TROPHY_DATA[data_name]['name'] + "</div>");
	}else if(type == "UNLOCK"){
		$('body').append("<div class=\"popup pop" + popup_count + "\">[!] " + COURSE_DATA[data_name]['name'] + "解禁！</div>");
	}

	var scale = $('#enchant-stage').find('div').css('-webkit-transform');

	$('.pop' + popup_count).css({
		'display':'block',
		'-webkit-transform-origin':'0px 0px',
		'-webkit-transform':scale,
		'top':css_top,
		'left':css_left
	});

	setTimeout( function() {
		$('.pop' + popup_count).animate(
			{'opacity':'0.9'},
			'fast'
		);
	}, $(".popup").length * 50);

	setTimeout( function() {
		$('.pop' + popup_count).animate({opacity:0,},
			{duration:'fast',complete:
			function(){
				$('.pop' + popup_count).remove();
			},
		});
	}, 4000);

}